# =============================================================================
# USIV PDF SERVICE - CONFIGURACIÓN DE PRODUCCIÓN
# =============================================================================

# Información de la aplicación
spring.application.name=usiv-pdf-service
spring.application.version=1.0.0
spring.application.description=Servicio de generación y firma digital de PDFs

# =============================================================================
# CONFIGURACIÓN DE AUTENTICACIÓN
# =============================================================================
api.admin.username=${API_ADMIN_USERNAME:admin}
api.admin.password=${API_ADMIN_PASSWORD:UsivAdmin2025!}
api.user.username=${API_USER_USERNAME:user}
api.user.password=${API_USER_PASSWORD:user123}

# =============================================================================
# CONFIGURACIÓN DEL SERVIDOR
# =============================================================================
# No configurar puerto - usa la configuración de Tomcat externo
# server.port se omite intencionalmente para WAR deployment
server.servlet.context-path=/pdf-signer
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# Configuración de compresión
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# Configuración de timeout
server.tomcat.connection-timeout=20000
server.tomcat.max-connections=8192
server.tomcat.threads.max=200
server.tomcat.threads.min-spare=10

# Configuración para proxy reverso
server.tomcat.remoteip.remote-ip-header=x-forwarded-for
server.tomcat.remoteip.protocol-header=x-forwarded-proto
server.forward-headers-strategy=native

# =================================================================
# CONFIGURACIÓN DE LOGGING
# =================================================================
logging.level.root=WARN
logging.level.com.usiv=INFO
logging.level.org.springframework.security=INFO
logging.level.org.springframework.web=WARN

# Configuración de archivos de log
logging.file.name=${LOG_PATH:/opt/usiv/logs}/usiv-pdf-service.log
logging.file.max-size=10MB
logging.file.max-history=30
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# =================================================================
# CONFIGURACIÓN DE SEGURIDAD JWT
# =================================================================
jwt.secret=${JWT_SECRET:usiv-pdf-service-secret-key-2024-very-long-and-secure-key-for-production-validador}
jwt.expiration=${JWT_EXPIRATION:86400000}
jwt.issuer=usiv-pdf-service
jwt.audience=usiv-clients
jwt.download-expiration=3600000

# Configuración de CORS
cors.allowed-origins=https://validador.usiv.cl,https://usiv.cl,https://www.usiv.cl
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=*
cors.allow-credentials=true
cors.max-age=3600

# =================================================================
# CONFIGURACIÓN DE ALMACENAMIENTO DE ARCHIVOS
# =================================================================
pdf.storage.base-path=${PDF_STORAGE_PATH:/opt/usiv/storage/pdfs}
pdf.storage.download-url=https://validador.usiv.cl/pdf-signer/download
pdf.storage.download-base-url=https://validador.usiv.cl/pdf-signer/download
pdf.cleanup.retention-months=6
pdf.cleanup.trash-retention-days=30
pdf.cleanup.trash-folder-name=_trash
pdf.cleanup.enabled=true

# =================================================================
# CONFIGURACIÓN DE FIRMA DIGITAL
# =================================================================
pdf.signature.p12-path=${CERT_PATH:/opt/usiv/certs}/demo.p12
pdf.signature.password=${CERT_PASSWORD:123456}
pdf.signature.reason=Firmado digitalmente por USIV
pdf.signature.location=Santiago, Chile
pdf.signature.contact=contacto@usiv.cl

# =================================================================
# CONFIGURACIÓN DE CÓDIGOS QR
# =================================================================
qr.size=150
qr.margin=1
qr.error-correction=M

# =================================================================
# CONFIGURACIÓN DE SWAGGER/OPENAPI
# =================================================================
# Deshabilitar Swagger en producción por seguridad
springdoc.api-docs.enabled=false
springdoc.swagger-ui.enabled=false

# =================================================================
# CONFIGURACIÓN DE ACTUATOR
# =================================================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=never
management.info.env.enabled=true

# Información de la aplicación para Actuator
info.app.name=USIV PDF Service
info.app.description=Servicio de generación y firma de documentos PDF
info.app.version=1.0.0
info.app.encoding=UTF-8
info.app.java.version=${java.version}

# =================================================================
# CONFIGURACIÓN DE VALIDACIÓN
# =================================================================
validation.rut.enabled=true
validation.rut.format=^[0-9]{7,8}-[0-9Kk]$
validation.license.format=^[A-Z]{1,2}[0-9]{6,8}$
validation.coordinates.precision=6

# =================================================================
# CONFIGURACIÓN DE SEGURIDAD ADICIONAL
# =================================================================
# Deshabilitar herramientas de desarrollo
spring.devtools.restart.enabled=false
spring.devtools.livereload.enabled=false

# Configuración de multipart para archivos
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB